# 実装計画

- [ ] 1. プロジェクトセットアップとデータベース設定
  - Prismaをインストールし、SQLiteデータベースを設定する
  - Todoモデルのスキーマを定義し、マイグレーションを実行する
  - Prismaクライアントの初期化とデータベース接続を確認する
  - _要件: 1.3, 2.2_

- [x] 2. Server Actionsの実装
  - [x] 2.1 基本的なServer Actionsファイルを作成
    - lib/actions.tsファイルを作成し、Prismaクライアントをインポートする
    - 'use server'ディレクティブを追加し、基本構造を設定する
    - _要件: 1.1, 1.3_

  - [x] 2.2 createTodo Server Actionを実装
    - FormDataからタイトルを取得し、バリデーションを行う
    - 新しいタスクをデータベースに保存する機能を実装する
    - revalidatePathでページを更新する処理を追加する
    - _要件: 1.1, 1.2_

  - [x] 2.3 toggleTodo Server Actionを実装
    - タスクIDを受け取り、完了状態を切り替える機能を実装する
    - データベースの更新とrevalidatePathを実行する
    - _要件: 3.1, 3.2_

  - [x] 2.4 updateTodo Server Actionを実装
    - タスクIDとタイトルを受け取り、タスクを更新する機能を実装する
    - バリデーションとデータベース更新処理を実装する
    - _要件: 5.1, 5.2, 5.4_

  - [x] 2.5 deleteTodo Server Actionを実装
    - タスクIDを受け取り、タスクを削除する機能を実装する
    - データベースからの削除とrevalidatePathを実行する
    - _要件: 4.2_

- [x] 3. データ取得関数の実装
  - [x] 3.1 getTodos関数を実装
    - Prismaクライアントを使用して全タスクを取得する関数を作成する
    - 作成日時の降順でソートする処理を追加する
    - _要件: 2.1, 2.2_

  - [x] 3.2 フィルタリング機能付きgetTodos関数を実装
    - フィルタータイプ（all, active, completed）を受け取る機能を追加する
    - 条件に応じてタスクをフィルタリングする処理を実装する
    - _要件: 6.1, 6.2, 6.3_

- [x] 4. UIコンポーネントの実装
  - [x] 4.1 TodoFormコンポーネントを作成
    - [x] フォーム要素とcreateToDoアクションを統合するClient Componentを作成する
    - [x] バリデーション機能とエラー表示を実装する
    - [x] 送信後のフォームリセット機能を追加する
    - [x] ローディング状態とエラーハンドリングを実装する
    - [x] 単体テストを作成し、動作を確認する
    - _要件: 1.1, 1.2_

  - [x] 4.2 TodoItemコンポーネントを作成
    - 個別タスクの表示とアクション（完了切り替え、削除）を実装する
    - インライン編集機能を持つClient Componentを作成する
    - 完了済みタスクの取り消し線スタイルを実装する
    - _要件: 3.1, 3.2, 3.3, 4.1, 4.2, 4.3, 5.1, 5.2, 5.3_

  - [x] 4.3 TodoListコンポーネントを作成
    - タスクリストを表示するServer Componentを作成する
    - 各TodoItemコンポーネントをレンダリングする処理を実装する
    - タスクが存在しない場合のメッセージ表示を追加する
    - _要件: 2.1, 2.2, 2.3_

  - [x] 4.4 TodoFilterコンポーネントを作成
    - フィルタリングオプション（全て/未完了/完了済み）のClient Componentを作成する
    - URLパラメータでフィルター状態を管理する機能を実装する
    - アクティブフィルターの視覚的表示を追加する
    - _要件: 6.1, 6.2, 6.3_

- [x] 5. メインページの統合
  - [x] 5.1 TodoPageコンポーネントを作成
    - Server Componentとしてメインページを実装する
    - URLパラメータからフィルター状態を取得する処理を追加する
    - getTodos関数を呼び出してデータを取得する
    - _要件: 2.1, 6.1, 6.2, 6.3_

  - [x] 5.2 全コンポーネントを統合
    - TodoPage内でTodoForm、TodoFilter、TodoListコンポーネントを統合する
    - 適切なpropsの受け渡しとレイアウトを実装する
    - _要件: 全要件の統合_

- [x] 6. スタイリングとUX改善
  - [x] 6.1 Tailwind CSSでレスポンシブデザインを実装
    - モバイルファーストのレスポンシブレイアウトを作成する
    - 美しいUIデザインとアニメーション効果を追加する
    - _要件: 全要件のUX向上_

  - [x] 6.2 エラーハンドリングとローディング状態を実装
    - フォーム送信時のローディング状態を表示する機能を追加する
    - エラーメッセージの適切な表示を実装する
    - _要件: 1.2, 5.4_

- [ ] 7. テストの実装
  - [x] 7.1 Server Actionsの単体テストを作成
    - [x] createTodo、updateTodo、deleteTodo、toggleTodoのテストを実装する
    - [x] バリデーション機能のテストを追加する
    - [x] Prismaクライアントのモック化とテスト環境設定を完了
    - _要件: 全要件の品質保証_

  - [x] 7.2 メインページコンポーネントのテストを作成
    - [x] TodoPageコンポーネントのレンダリングテストを実装する
    - [x] TypeScript型安全性を向上させ、モックデータの型定義を修正する
    - [x] Server Componentのテスト手法を確立する
    - _要件: 全要件の品質保証_

  - [x] 7.3 残りのUIコンポーネントのテストを作成
    - 各UIコンポーネント（TodoForm、TodoItem、TodoFilter）のレンダリングテストを実装する
    - ユーザーインタラクションのテストを追加する
    - _要件: 全要件の品質保証_